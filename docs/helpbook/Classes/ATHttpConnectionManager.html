<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ATHttpConnectionManager Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Class/ATHttpConnectionManager" class="dashAnchor"></a>
    <a title="ATHttpConnectionManager Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">ATKit Docs</a></p>
        <p class="header-right"><a href="https://github.com/aurvan/atkit-ios-release"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">ATKit Reference</a>
        <img id="carat" src="../img/carat.png" />
        ATHttpConnectionManager Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/ATCheckbox.html">ATCheckbox</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATHttpConnectionManager.html">ATHttpConnectionManager</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATHttpConnectionManagerAttachment.html">ATHttpConnectionManagerAttachment</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATHttpConnectionManagerRequest.html">ATHttpConnectionManagerRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATHttpConnectionManagerResponse.html">ATHttpConnectionManagerResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATHttpConnectionManagerResult.html">ATHttpConnectionManagerResult</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATKit.html">ATKit</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATProgressOverlay.html">ATProgressOverlay</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATTextView.html">ATTextView</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATToast.html">ATToast</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/ATWindow.html">ATWindow</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/ATMimeType.html">ATMimeType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/ATToastType.html">ATToastType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/UIImageScaleMode.html">UIImageScaleMode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/NSObject.html">NSObject</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/UIApplication.html">UIApplication</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/UIColor.html">UIColor</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/UIDevice.html">UIDevice</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/UIImage.html">UIImage</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/UIView.html">UIView</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>ATHttpConnectionManager</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">ATHttpConnectionManager</span><span class="p">:</span> <span class="kt">NSObject</span></code></pre>

                </div>
              </div>
            <p>The ATHttpConnectionManager allows to interact with http server with ease.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@ATKit@objc(cs)ATHttpConnectionManager(cpy)sharedInstance"></a>
                    <a name="//apple_ref/swift/Variable/sharedInstance" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@ATKit@objc(cs)ATHttpConnectionManager(cpy)sharedInstance">sharedInstance</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The variable allows to get a singleton instance of the class.</p>

<p><strong>Usage Example</strong></p>
<pre class="highlight swift"><code><span class="kt">ATHttpConnectionManager</span><span class="o">.</span><span class="n">sharedInstance</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">let</span> <span class="nv">sharedInstance</span> <span class="p">:</span><span class="kt">ATHttpConnectionManager</span> <span class="o">=</span> <span class="kt">ATHttpConnectionManager</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@ATKit@objc(cs)ATHttpConnectionManager(im)sendRequestWithRequest:responseMapper:completion:"></a>
                    <a name="//apple_ref/swift/Method/sendRequest(request:responseMapper:completion:)" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@ATKit@objc(cs)ATHttpConnectionManager(im)sendRequestWithRequest:responseMapper:completion:">sendRequest(request:responseMapper:completion:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The function to send http request.</p>

<p><strong>Usage Example</strong></p>
<pre class="highlight swift"><code><span class="c1">// Code to explain handling response WITHOUT Response-Mapper-Block</span>
<span class="k">let</span> <span class="nv">aRequest</span> <span class="o">=</span> <span class="kt">ATHttpConnectionManagerRequest</span><span class="p">(</span><span class="nv">urlString</span><span class="p">:</span> <span class="s">"https://example.com/image.png"</span><span class="p">)</span>

<span class="kt">ATProgressOverlay</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">show</span><span class="p">()</span>
<span class="kt">ATHttpConnectionManager</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">sendRequest</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="n">aRequest</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{(</span><span class="n">pResult</span><span class="p">)</span> <span class="k">in</span>
   <span class="kt">ATProgressOverlay</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">hide</span><span class="p">()</span>
   <span class="k">let</span> <span class="nv">anImageData</span> <span class="p">:</span><span class="kt">Data</span><span class="p">?</span> <span class="o">=</span> <span class="p">(</span><span class="n">pResult</span><span class="o">.</span><span class="n">result</span> <span class="k">as?</span> <span class="kt">ATHttpConnectionManagerResponse</span><span class="p">)?</span><span class="o">.</span><span class="n">body</span>
   <span class="k">if</span> <span class="n">anImageData</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
       <span class="k">let</span> <span class="nv">anImage</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">anImageData</span><span class="o">!</span><span class="p">)</span>
       <span class="k">self</span><span class="o">.</span><span class="n">imageView</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">anImage</span>
   <span class="p">}</span>
<span class="p">})</span>


<span class="c1">// Code to explain handling response WITH Response-Mapper-Block</span>
<span class="k">let</span> <span class="nv">aRequest</span> <span class="o">=</span> <span class="kt">ATHttpConnectionManagerRequest</span><span class="p">(</span><span class="nv">urlString</span><span class="p">:</span> <span class="s">"https://example.com/data.json"</span><span class="p">)</span>

<span class="kt">ATProgressOverlay</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">show</span><span class="p">()</span>
<span class="kt">ATHttpConnectionManager</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">sendRequest</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="n">aRequest</span><span class="p">,</span> <span class="nv">responseMapper</span><span class="p">:</span> <span class="p">{(</span><span class="n">pResponse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ATHttpConnectionManagerResult</span> <span class="k">in</span>
   <span class="k">let</span> <span class="nv">aReturnVal</span> <span class="p">:</span><span class="kt">ATHttpConnectionManagerResult</span> <span class="o">=</span> <span class="kt">ATHttpConnectionManagerResult</span><span class="p">()</span>
   <span class="k">do</span> <span class="p">{</span>
       <span class="k">let</span> <span class="nv">aJsonObject</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">JSONSerialization</span><span class="o">.</span><span class="nf">jsonObject</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">pResponse</span><span class="o">.</span><span class="n">body</span><span class="o">!</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kt">JSONSerialization</span><span class="o">.</span><span class="kt">ReadingOptions</span><span class="o">.</span><span class="n">allowFragments</span><span class="p">)</span>
       <span class="k">if</span> <span class="n">aJsonObject</span> <span class="k">is</span> <span class="kt">NSDictionary</span> <span class="p">{</span>
           <span class="k">let</span> <span class="nv">aResponseDict</span> <span class="p">:</span><span class="kt">NSDictionary</span> <span class="o">=</span> <span class="n">aJsonObject</span> <span class="k">as!</span> <span class="kt">NSDictionary</span>
           <span class="n">aReturnVal</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="kc">nil</span>
           <span class="n">aReturnVal</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">aResponseDict</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">forKey</span><span class="p">:</span> <span class="s">"emailAddress"</span><span class="p">)</span> <span class="k">as</span> <span class="kt">AnyObject</span>
       <span class="p">}</span>
   <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
       <span class="n">aReturnVal</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="kt">NSError</span><span class="p">(</span><span class="nv">domain</span><span class="p">:</span> <span class="s">"com.example.error"</span><span class="p">,</span> <span class="nv">code</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">userInfo</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSLocalizedDescriptionKey</span> <span class="p">:</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">])</span>
       <span class="n">aReturnVal</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="kc">nil</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">aReturnVal</span>
<span class="p">},</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{(</span><span class="n">pResult</span><span class="p">)</span> <span class="k">in</span>
   <span class="kt">ATProgressOverlay</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">hide</span><span class="p">()</span>
   <span class="k">if</span> <span class="n">pResult</span><span class="o">.</span><span class="n">result</span> <span class="k">is</span> <span class="kt">String</span> <span class="p">{</span>
       <span class="k">let</span> <span class="nv">anEmailAddress</span> <span class="o">=</span> <span class="n">pResult</span><span class="o">.</span><span class="n">result</span> <span class="k">as!</span> <span class="kt">String</span>
       <span class="k">self</span><span class="o">.</span><span class="n">textView</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">anEmailAddress</span>
   <span class="p">}</span>
<span class="p">})</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">sendRequest</span><span class="p">(</span><span class="n">request</span> <span class="nv">pRequest</span> <span class="p">:</span><span class="kt"><a href="../Classes/ATHttpConnectionManagerRequest.html">ATHttpConnectionManagerRequest</a></span><span class="p">,</span> <span class="n">responseMapper</span> <span class="nv">pResponseMapper</span><span class="p">:</span> <span class="p">((</span><span class="kt"><a href="../Classes/ATHttpConnectionManagerResponse.html">ATHttpConnectionManagerResponse</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Classes/ATHttpConnectionManagerResult.html">ATHttpConnectionManagerResult</a></span><span class="p">)?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">completion</span> <span class="nv">pCompletion</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">((</span><span class="kt"><a href="../Classes/ATHttpConnectionManagerResult.html">ATHttpConnectionManagerResult</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">))</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>pRequest</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Parameter to provide HTTP request details to execute.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>pResponseMapper</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Parameter to provide response mapper block. The block will get 1) HTTP Response Code, 2) HTTP Response Headers and 3) HTTP Response Body as parameters. You can perform different tasks in this block, like converting the response body to JSON object or XML object and then convert it to model objects etc.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>pCompletion</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Parameter to provide completion block. If response mapper block is nil, then completion block will have ATHttpConnectionManagerResult object with result set to HTTP response body.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="http://www.aurvan.com" target="_blank" rel="external">Aurvan.com</a>. All rights reserved. (Last updated: 2018-04-11)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
